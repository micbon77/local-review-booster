// lib/i18n.ts
"use client";

import { useState, useEffect } from 'react';

type Locale = 'en' | 'fr' | 'es' | 'pt' | 'de' | 'it';

const translations: Record<Locale, Record<string, string>> = {
    en: {
        loginTitle: 'Subscribe',
        emailPlaceholder: 'Email',
        subscribeButton: 'Pay monthly subscription',
        dashboardTitle: 'Dashboard',
        businessNamePlaceholder: 'Business name',
        mapsLinkPlaceholder: 'Google Maps link',
        saveBusinessButton: 'Save business',
        qrTitle: 'Your QR Code',
        qrSubtitle: 'Share this QR code or link with your customers.',
        feedbackTitle: 'Recent Feedback',
        noFeedback: 'No feedback yet. Share your QR code to get started!',
        ratingPrompt: 'How was your experience?',
        submitButton: 'Submit',
        thankYouPositive: 'Thank you for your feedback! You will be redirected to Google...',
        thankYouNegative: 'Your comment has been saved. Thank you!',
        signOut: 'Sign Out',
        addNewBusiness: 'Add New Business',
        businessNameLabel: 'Business Name',
        mapsLinkLabel: 'Google Maps Link',
        cancelButton: 'Cancel',
        createBusinessButton: 'Create Business',
        downloadPoster: 'Download PDF Poster',
        printPosterHint: 'Print this poster and place it in your store to get more reviews.',
        analyticsLockedTitle: 'Analytics Locked',
        analyticsLockedMessage: 'Upgrade to Pro to see detailed insights.',
        unlockAnalyticsButton: 'Unlock Analytics',
        upgradeToSeeAll: 'Upgrade to see all feedbacks',
        loading: 'Loading...',
        error: 'Error',
        welcomeCreate: 'Welcome! Create your first business',
    },
    fr: {
        loginTitle: "S'abonner",
        emailPlaceholder: 'Email',
        subscribeButton: "Payer l'abonnement mensuel",
        dashboardTitle: 'Tableau de bord',
        businessNamePlaceholder: "Nom de l'entreprise",
        mapsLinkPlaceholder: 'Lien Google Maps',
        saveBusinessButton: "Enregistrer l'entreprise",
        qrTitle: 'Votre QR Code',
        qrSubtitle: 'Partagez ce QR code ou le lien avec vos clients.',
        feedbackTitle: 'Commentaires récents',
        noFeedback: "Aucun commentaire pour le moment. Partagez votre QR code pour commencer !",
        ratingPrompt: "Comment s'est passée votre expérience ?",
        submitButton: 'Envoyer',
        thankYouPositive: "Merci pour votre avis ! Vous serez redirigé vers Google...",
        thankYouNegative: "Votre commentaire a été enregistré. Merci !",
        signOut: 'Se déconnecter',
        addNewBusiness: 'Ajouter une entreprise',
        businessNameLabel: "Nom de l'entreprise",
        mapsLinkLabel: 'Lien Google Maps',
        cancelButton: 'Annuler',
        createBusinessButton: 'Créer',
        downloadPoster: 'Télécharger le poster PDF',
        printPosterHint: 'Imprimez ce poster et placez-le dans votre magasin.',
        analyticsLockedTitle: 'Analyses verrouillées',
        analyticsLockedMessage: 'Passez à Pro pour voir les détails.',
        unlockAnalyticsButton: 'Débloquer les analyses',
        upgradeToSeeAll: 'Passez à Pro pour tout voir',
        loading: 'Chargement...',
        error: 'Erreur',
        welcomeCreate: 'Bienvenue ! Créez votre première entreprise',
    },
    es: {
        loginTitle: 'Suscribirse',
        emailPlaceholder: 'Correo electrónico',
        subscribeButton: 'Pagar suscripción mensual',
        dashboardTitle: 'Panel',
        businessNamePlaceholder: 'Nombre del negocio',
        mapsLinkPlaceholder: 'Enlace de Google Maps',
        saveBusinessButton: 'Guardar negocio',
        qrTitle: 'Tu QR Code',
        qrSubtitle: 'Comparte este QR o el enlace con tus clientes.',
        feedbackTitle: 'Comentarios recientes',
        noFeedback: 'Aún no hay comentarios. Comparte tu QR para comenzar.',
        ratingPrompt: '¿Cómo fue tu experiencia?',
        submitButton: 'Enviar',
        thankYouPositive: '¡Gracias por tu feedback! Serás redirigido a Google...',
        thankYouNegative: 'Tu comentario ha sido guardado. ¡Gracias!',
        signOut: 'Cerrar sesión',
        addNewBusiness: 'Añadir nuevo negocio',
        businessNameLabel: 'Nombre del negocio',
        mapsLinkLabel: 'Enlace de Google Maps',
        cancelButton: 'Cancelar',
        createBusinessButton: 'Crear negocio',
        downloadPoster: 'Descargar póster PDF',
        printPosterHint: 'Imprime este póster y colócalo en tu tienda.',
        analyticsLockedTitle: 'Analíticas bloqueadas',
        analyticsLockedMessage: 'Actualiza a Pro para ver detalles.',
        unlockAnalyticsButton: 'Desbloquear analíticas',
        upgradeToSeeAll: 'Actualiza para ver todo',
        loading: 'Cargando...',
        error: 'Error',
        welcomeCreate: '¡Bienvenido! Crea tu primer negocio',
    },
    pt: {
        loginTitle: 'Inscrever-se',
        emailPlaceholder: 'E‑mail',
        subscribeButton: 'Pagar assinatura mensal',
        dashboardTitle: 'Painel',
        businessNamePlaceholder: 'Nome do negócio',
        mapsLinkPlaceholder: 'Link do Google Maps',
        saveBusinessButton: 'Salvar negócio',
        qrTitle: 'Seu QR Code',
        qrSubtitle: 'Compartilhe este QR ou o link com seus clientes.',
        feedbackTitle: 'Feedback recente',
        noFeedback: 'Ainda não há feedback. Compartilhe seu QR para começar.',
        ratingPrompt: 'Como foi sua experiência?',
        submitButton: 'Enviar',
        thankYouPositive: 'Obrigado pelo feedback! Você será redirecionado ao Google...',
        thankYouNegative: 'Seu comentário foi salvo. Obrigado!',
        signOut: 'Sair',
        addNewBusiness: 'Adicionar novo negócio',
        businessNameLabel: 'Nome do negócio',
        mapsLinkLabel: 'Link do Google Maps',
        cancelButton: 'Cancelar',
        createBusinessButton: 'Criar negócio',
        downloadPoster: 'Baixar pôster PDF',
        printPosterHint: 'Imprima este pôster e coloque-o em sua loja.',
        analyticsLockedTitle: 'Análises bloqueadas',
        analyticsLockedMessage: 'Atualize para Pro para ver detalhes.',
        unlockAnalyticsButton: 'Desbloquear análises',
        upgradeToSeeAll: 'Atualize para ver tudo',
        loading: 'Carregando...',
        error: 'Erro',
        welcomeCreate: 'Bem-vindo! Crie seu primeiro negócio',
    },
    de: {
        loginTitle: 'Abonnieren',
        emailPlaceholder: 'E‑Mail',
        subscribeButton: 'Monatliches Abonnement bezahlen',
        dashboardTitle: 'Dashboard',
        businessNamePlaceholder: 'Geschäftsname',
        mapsLinkPlaceholder: 'Google‑Maps‑Link',
        saveBusinessButton: 'Geschäft speichern',
        qrTitle: 'Dein QR‑Code',
        qrSubtitle: 'Teile diesen QR‑Code oder den Link mit deinen Kunden.',
        feedbackTitle: 'Aktuelles Feedback',
        noFeedback: 'Noch kein Feedback. Teile deinen QR‑Code, um zu starten.',
        ratingPrompt: 'Wie war deine Erfahrung?',
        submitButton: 'Absenden',
        thankYouPositive: 'Danke für dein Feedback! Du wirst zu Google weitergeleitet...',
        thankYouNegative: 'Dein Kommentar wurde gespeichert. Danke!',
        signOut: 'Abmelden',
        addNewBusiness: 'Neues Geschäft hinzufügen',
        businessNameLabel: 'Geschäftsname',
        mapsLinkLabel: 'Google Maps Link',
        cancelButton: 'Abbrechen',
        createBusinessButton: 'Geschäft erstellen',
        downloadPoster: 'PDF-Poster herunterladen',
        printPosterHint: 'Drucken Sie dieses Poster aus und hängen Sie es auf.',
        analyticsLockedTitle: 'Analysen gesperrt',
        analyticsLockedMessage: 'Upgrade auf Pro für Details.',
        unlockAnalyticsButton: 'Analysen freischalten',
        upgradeToSeeAll: 'Upgrade, um alles zu sehen',
        loading: 'Laden...',
        error: 'Fehler',
        welcomeCreate: 'Willkommen! Erstellen Sie Ihr erstes Geschäft',
    },
    it: {
        loginTitle: 'Iscriviti',
        emailPlaceholder: 'Email',
        subscribeButton: 'Paga abbonamento mensile',
        dashboardTitle: 'Dashboard',
        businessNamePlaceholder: 'Nome attività',
        mapsLinkPlaceholder: 'Link Google Maps',
        saveBusinessButton: 'Salva attività',
        qrTitle: 'Il tuo QR Code',
        qrSubtitle: 'Condividi questo QR code o il link con i tuoi clienti.',
        feedbackTitle: 'Feedback recenti',
        noFeedback: 'Nessun feedback ancora. Condividi il tuo QR per iniziare!',
        ratingPrompt: 'Come è stata la tua esperienza?',
        submitButton: 'Invia',
        thankYouPositive: 'Grazie per il tuo feedback! Verrai reindirizzato a Google...',
        thankYouNegative: 'Il tuo commento è stato salvato. Grazie!',
        signOut: 'Esci',
        addNewBusiness: 'Aggiungi attività',
        businessNameLabel: 'Nome attività',
        mapsLinkLabel: 'Link Google Maps',
        cancelButton: 'Annulla',
        createBusinessButton: 'Crea attività',
        downloadPoster: 'Scarica Poster PDF',
        printPosterHint: 'Stampa questo poster ed esponilo nel tuo negozio.',
        analyticsLockedTitle: 'Analisi bloccate',
        analyticsLockedMessage: 'Passa a Pro per vedere i dettagli.',
        unlockAnalyticsButton: 'Sblocca Analisi',
        upgradeToSeeAll: 'Passa a Pro per vedere tutto',
        loading: 'Caricamento...',
        error: 'Errore',
        welcomeCreate: 'Benvenuto! Crea la tua prima attività',
    },
};

export const useTranslation = () => {
    const [locale, setLocale] = useState<Locale>('en');
    const [t, setT] = useState(translations['en']);

    useEffect(() => {
        if (typeof navigator !== 'undefined') {
            const lang = navigator.language.slice(0, 2).toLowerCase();
            const supported: Locale[] = ['en', 'fr', 'es', 'pt', 'de', 'it'];
            const chosen = supported.includes(lang as Locale) ? (lang as Locale) : 'en';
            setLocale(chosen);
            setT(translations[chosen]);
        }
    }, []);

    return { t, locale };
};
